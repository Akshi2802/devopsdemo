
in jenkins

execute shell

cp $WORKSPACE/target/javaone.war /tmp

/home/vagrant/ansible_roles/webserver/defaults/main.yml


#war file path
war_remotepath: /opt/tomcat/webapps/


#war url path
war_url: "http://192.168.1.16:8085/job/devopsdemo/ws/target/javaone.war"



/home/vagrant/ansible_roles/webserver/tasks

#- name: download war file to server
#  get_url:
#   url: '{{ war_url }}'
#   dest: '{{ war_remotepath }}'

- name: copy war file
  copy:
    src: /tmp/javaone.war
    dest: '{{ war_remotepath }}'
  notify: restart tomcat

- name: Enable tomcat service on startup
  systemd:
    name: "{{ tomcat_service_name }}"
    enabled: "{% if tomcat_service_enabled_on_startup %}yes{% else %}no{% endif %}"
    daemon_reload: yes
